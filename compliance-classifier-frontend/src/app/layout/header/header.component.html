<header class="header">
  <div class="header-container">
    <!-- Logo -->
    <div class="logo-container">
      <a routerLink="/" class="logo">
        <img [src]="'assets/images/CUBE-Logo.png'" alt="CUBE Logo" class="logo-image" />
      </a>
    </div>
    
    <!-- Navigation -->
    <nav class="main-nav">
      <ul class="nav-list">
        <li class="nav-item">
          <a routerLink="/dashboard" routerLinkActive="active" class="nav-link">Dashboard</a>
        </li>
        <li class="nav-item">
          <a routerLink="/batches" routerLinkActive="active" class="nav-link">Batches</a>
        </li>
        <li class="nav-item">
          <a routerLink="/reports" routerLinkActive="active" class="nav-link">Reports</a>
        </li>
      </ul>
    </nav>
    
    <!-- Theme Toggle -->
    <div class="theme-toggle-container">
      <div class="theme-toggle-wrapper" pTooltip="Toggle dark mode" tooltipPosition="bottom">
        <i class="pi" [ngClass]="isDarkTheme ? 'pi-moon' : 'pi-sun'"></i>
        <p-inputSwitch
          [(ngModel)]="isDarkTheme"
          (onChange)="toggleTheme()"
          styleClass="theme-switch">
        </p-inputSwitch>
      </div>
    </div>
    
    <!-- AI Provider Dropdown -->
    <div class="ai-provider-container">
      <p-dropdown
        [options]="aiProviders"
        [(ngModel)]="selectedProvider"
        (onChange)="onProviderChange($event)"
        optionLabel="label"
        optionValue="value"
        styleClass="p-dropdown-sm">
        <ng-template pTemplate="selectedItem">
          <div class="flex align-items-center">
            <i class="pi pi-server mr-2"></i>
            <span>{{ selectedProvider | titlecase }}</span>
          </div>
        </ng-template>
      </p-dropdown>
    </div>
    
    <!-- Create Batch Button -->
    <div class="create-batch-container">
      <button
        pButton
        pRipple
        label="Create New Batch"
        icon="pi pi-plus"
        class="p-button-rounded"
        (click)="createNewBatch()">
      </button>
    </div>
    
    <!-- User Menu -->
    <div class="user-menu-container">
      <ng-container *ngIf="!isAuthenticated">
        <button pButton
          label="Login"
          icon="pi pi-sign-in"
          class="p-button-text login-button"
          (click)="login()">
        </button>
      </ng-container>
      
      <ng-container *ngIf="isAuthenticated">
        <p-menu #menu [popup]="true" [model]="menuItems"></p-menu>
        
        <button pButton
          type="button"
          class="p-button-text p-button-rounded"
          icon="pi pi-user"
          (click)="menu.toggle($event)">
          <span class="username">{{ username }}</span>
        </button>
      </ng-container>
    </div>
  </div>
</header>