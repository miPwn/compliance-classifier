<div class="dashboard-container">
  <p-toast></p-toast>
  
  <div class="grid">
    <!-- Pipeline Timeline (Left Section) -->
    <div class="col-12 lg:col-6 xl:col-7">
      <app-pipeline-timeline
        [pipelineEvents]="pipelineEvents"
        [isLoading]="isLoading"
        [autoRefresh]="autoRefresh"
        (refreshToggle)="toggleAutoRefresh($event)"
        (manualRefresh)="refreshData()">
      </app-pipeline-timeline>
    </div>
    
    <!-- Recent Batches (Right Section) -->
    <div class="col-12 lg:col-6 xl:col-5">
      <app-recent-batches
        [batches]="recentBatches"
        [isLoading]="isLoading"
        [error]="error"
        (viewDetails)="viewBatchDetails($event)"
        (uploadDocuments)="uploadToBatch($event)"
        (deleteBatch)="deleteBatch($event)"
        (createBatch)="createNewBatch()">
      </app-recent-batches>
    </div>
    
    <!-- File Upload Section (Conditional) -->
    <div class="col-12" *ngIf="selectedBatchId">
      <app-file-upload
        #fileUpload
        [batchId]="selectedBatchId"
        (uploadComplete)="onUploadComplete($event)">
      </app-file-upload>
    </div>
    
    <!-- Classification Category Summary (Bottom Section) -->
    <div class="col-12">
      <app-category-summary
        [categories]="classificationCategoriesWithCounts"
        [isLoading]="isLoading">
      </app-category-summary>
    </div>
  </div>
  
  <!-- Create Batch Modal -->
  <app-create-batch-modal
    #createBatchModal
    (batchCreated)="onBatchCreated($event)">
  </app-create-batch-modal>
</div>